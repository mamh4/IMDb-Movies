# Data

```{r, echo = FALSE, message = FALSE}
source(here::here("scripts/setup.R"))
```

* Sources
* Description
Here we include the table containing the data + mention how we can relate the the variable from the data set we have to the success and success  explanatory variables.



* Wrangling/cleaning
Rather scrapping, wrangling and cleaning


```{r}
# Source relevant scripts
#



# Load and aggregate data

#movies <- scrape_movies (n = 1e5,min_number_votes = 1e4,print_progress =TRUE)
load("data/cleaned_data/bla bla.Rdata")

#dob_stars <- find_dob( movies |> select(stars)
#                       |> separate_rows(stars, sep = ",\\s*")
#                       |> mutate (stars = str_replace_all(str_squish(stars),"\\s+","_")))
load("bla bla")

#dob_directors <- find_dob( movies |> select(directors)
#                       |> separate_rows(directors, sep = ",\\s*")
#                       |> mutate (directors = str_replace_all(str_squish(directors),"\\s+","_")))
load("bla bla bla")

#studio_and_budget <- enrich_studio_and_budget(movies[,c("title","year")])
load("bla bla bla")


#source("scripts/cleaning_functions/clean_studio_budget.R")
load("cleaned_data/bla bla bla.Rdata")


#source("clean_movies") TODO


read.csv("inflation")


#aggregate data + make it TIDY (Split per per Genre, Actor, Director and Studio)
movies <- movies |> mutate(
  studio = studio_and_budget$studio,
  budget = studio_and_budget$budget) |>
  left_join(inflation,by = "year") |> #check syntax
  separate_rows(stars, sep = ",\\s*") |>
  mutate(dob_stars = dob_table_stars$stars) |>
  separate_rows(directors, sep = ",\\s*") |>
  left_join(dob_table_directors,) |> #pick column dob_directors
  separate_rows(dob_directors, sep = ",\\s*") |>
  separate_rows(genre, sep = ",\\s*") |>
  mutate(dob_stars , dob_directors ) #change to date


```



* (new) Data Transformations
- certificate->age dependent
- gross adjusted for inflation (time series to justify why we should account for inflation) 
- Budget adjusted for inflation (time series ,, ,, ,, ...)
- Ticket sold estimate (current ticket price?)



```{r}
#load inflation data + other relevant data sets to make new columns



```

